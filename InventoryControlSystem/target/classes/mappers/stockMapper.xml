<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.itwillbs.mapper.StockMapper">

	<resultMap type="com.itwillbs.domain.StockVO" id="stock">
		<result property="pno" column="pno"/>
		<result property="warehouse_code" column="warehouse_code"/>
		<result property="count" column="count"/>
		<result property="pname" column="pname"/>
		<result property="company" column="divcode"/>
		<result property="category" column="category"/>
		
	</resultMap>
	
	<!-- 재고 리스트 조회 -->
	<select id = "selectStockList" resultType = "StockVO">
	select stock.pno, stock.warehouse_code, stock.count,
	product.pname, product.company, category.category
	from stock
	inner join product
	on stock.pno=product.pno
	inner join category
	on stock.category = category.category_code
	</select>
	
		<!-- 글 목록 조회(페이징처리) -->
	<select id = "selectStockListPage" resultType = "StockVO">
		<![CDATA[
		select stock.pno, stock.warehouse_code, stock.count,
		product.pname, product.company, category.category
		from stock
		inner join product
		on stock.pno=product.pno
		inner join category
		on stock.category = category.category_code
		where stock.pno > 0 order by stock.pno desc limit #{page} , 10
		]]>
	</select>
	
		<!-- 글 목록 조회(페이징처리-Cri) -->
	<select id = "selectStockListCri" resultType = "StockVO">
		<![CDATA[
		select stock.pno, stock.warehouse_code, stock.count,
		product.pname, product.company, category.category
		from stock
		inner join product
		on stock.pno=product.pno
		inner join category
		on stock.category = category.category_code
		where stock.pno > 0 order by stock.pno desc limit #{startPage} , #{pageSize}
		]]>
	</select>
	
	<select id = "totalCount" resultType = "int">
		select count(pno) from stock
	</select>
	
	  
</mapper>